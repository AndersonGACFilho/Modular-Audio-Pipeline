name: VideoTranscripter
channels:
  - conda-forge
  - defaults
dependencies:
  # Python version
  - python=3.11.*

  # System dependencies
  - ffmpeg
  - pip

  # Conda dependencies
  - numpy=1.26.*
  - python-dotenv=1.1.*

  # Pip dependencies
  - pip:
      # PyTorch with CUDA 12.1 - installed from PyTorch index (update extra-index-url)
      - --extra-index-url https://download.pytorch.org/whl/cu121
      - torch==2.5.1+cu121
      - torchvision==0.20.1+cu121
      - torchaudio==2.5.1+cu121
      - transformers>=4.40.0,<4.41.0
      - accelerate>=0.30.0,<0.31.0

      # Lightning ecosystem (optional, for advanced use)
      - lightning>=2.4.0,<2.5.0
      - torchmetrics>=1.6.0,<1.7.0

      # Core dependencies
      - typing-extensions>=4.12.2
      - protobuf>=5.29.0

      # Hugging Face
      - huggingface-hub~=0.32.0

      # Audio processing
      - noisereduce~=3.0.3
      - pydub~=0.25.1
      - pyloudnorm~=0.1.1
      - soundfile~=0.13.1
      - webrtcvad-wheels~=2.0.14

      # Transcription
      - openai-whisper>=20250625
      # Optimized Inference Engine
      - faster-whisper==1.2.1
      - ctranslate2<5,>=4.0

      # LLM Structured Output
      - instructor>=1.0.0
      - pydantic>=2.0.0
      - openai>=1.0.0

      # Speaker diarization
      - pyannote.audio>=3.1.0,<3.2.0

      # Vocal separation
      - demucs>=4.0.0

# Optional: if you prefer to install CUDA runtime via conda (instead of relying on wheel-built CUDA),
# you can add a cudatoolkit line below. On Windows, using the official PyTorch wheels with +cu121
# is usually sufficient and recommended.
# - cudatoolkit=12.1
